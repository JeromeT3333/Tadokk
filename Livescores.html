<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Scores</title>
  <link rel="icon" href="Tadokkico1.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }

    /* Splash animation */
    #intro-screen {
      animation: splash 3.5s forwards;
      transform-origin: top left;
    }
    @keyframes splash {
      0%   { transform: scale(1); opacity: 1; border-radius: 0; }
      70%  { transform: scale(1); opacity: 1; border-radius: 0; }
      85%  { transform: scale(0.7); opacity: 0.9; border-radius: 50px; }
      100% { transform: scale(0); opacity: 0; border-radius: 50px; }
    }

    /* Loader logo bounce */
    .logo-bounce { animation: bounceScale 1.5s infinite ease-in-out; }
    @keyframes bounceScale {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    /* Sidebar */
    .sidebar { transform: translateX(100%); transition: transform 0.3s ease; }
    .sidebar.active { transform: translateX(0); }
    .overlay { background: rgba(0,0,0,0.5); }

    /* Dark mode overrides */
    .dark body { background-color: #111827; color: #f3f4f6; }
    .dark .bg-white { background-color: #1f2937; }
    .dark .text-gray-500 { color: #9ca3af; }
    .dark header { background-color: #1e3a8a; }
    .dark .sidebar { background-color: rgba(31,41,55,0.9); }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen flex flex-col items-center justify-start">

  <!-- Splash -->
  <div id="intro-screen" class="fixed inset-0 bg-blue-600 flex items-center justify-center z-50">
    <img src="Tadokkico3.png" alt="Tadokk Logo" class="h-24 w-24 animate-pulse">
  </div>

  <!-- Header -->
  <header class="w-full flex items-center justify-between py-6 bg-blue-600 text-white shadow-lg px-6">
    <a href="index.html"><img src="Tadokkico3.png" alt="Logo" class="h-10 w-10"></a>
    <div class="text-center">
      <h1 class="text-3xl md:text-5xl font-extrabold">Live Scores</h1>
      <p class="text-sm md:text-lg opacity-90">Powered by Tadokk</p>
    </div>
    <button id="open-nav" class="text-white text-3xl">&#9776;</button>
  </header>

  <!-- Content -->
  <div class="w-full max-w-4xl mx-auto opacity-0 transition" id="page-content">
    <div id="loading" class="text-center py-10 hidden">
      <img src="Tadokkico1.png" alt="Loading Logo" class="h-16 w-16 mx-auto logo-bounce">
      <p class="mt-4 text-gray-600">Fetching scores...</p>
    </div>

    <main id="scores-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6 bg-white rounded-lg shadow-lg"></main>

    <footer class="text-center text-gray-500 text-xs mt-4">
      Last updated: <span id="last-updated">--</span>
    </footer>

    <section id="up-next" class="p-6 bg-white mt-6 rounded-lg shadow-lg">
      <h2 class="text-xl font-bold text-blue-600 mb-4">Up Next</h2>
      <div id="upcoming-container" class="space-y-4">
        <p class="text-gray-500">No upcoming matches listed.</p>
      </div>
    </section>

    <!-- Embedded Form Section -->
    <section id="feedback-form" class="p-6 bg-white mt-6 rounded-2xl shadow-lg">
      <h2 class="text-2xl font-extrabold text-blue-600 mb-4 text-center">Share Your Feedback</h2>
      <p class="text-gray-600 text-center mb-6">We’d love to hear from you! Fill out the form below:</p>
      <div class="rounded-xl overflow-hidden shadow-lg border border-gray-200">
        <iframe 
          src="https://form.svhrt.com/68d2d15c4e60dbe1c6db711f" 
          class="w-full h-[650px] border-0"
          loading="lazy">
        </iframe>
      </div>
    </section>

    <div id="error-message" class="text-center mt-4 text-red-600 font-medium hidden">
      <p>Failed to load scores. Please hold on!</p>
    </div>
  </div>

  <!-- Overlay -->
  <div id="overlay" class="overlay fixed inset-0 hidden z-20"></div>

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar fixed top-0 right-0 h-full w-72 bg-white/80 backdrop-blur-md shadow-lg z-30 flex flex-col">
    <div class="flex items-center justify-between p-4">
      <a href="index.html"><img src="Tadokkico1.png" alt="Logo" class="h-10 w-10"></a>
      <div class="flex items-center space-x-3">
        <button id="theme-toggle" class="text-gray-600 hover:text-gray-900">
          <i data-lucide="moon" class="w-6 h-6"></i>
        </button>
        <button id="close-nav" class="text-gray-600 hover:text-gray-900 text-2xl font-bold">&times;</button>
      </div>
    </div>
    <nav class="flex-1 p-6 space-y-4">
      <a href="#" class="block text-lg font-medium hover:text-blue-600">Home</a>
      <a href="#" class="block text-lg font-medium hover:text-blue-600">Scores</a>
      <a href="#" class="block text-lg font-medium hover:text-blue-600">News</a>
      <a href="#" class="block text-lg font-medium hover:text-blue-600">Contact</a>
    </nav>
    <div class="p-4 flex flex-col items-center space-y-3">
      <div class="flex space-x-4">
        <a href="#"><i data-lucide="facebook" class="w-6 h-6 hover:text-blue-600"></i></a>
        <a href="#"><i data-lucide="instagram" class="w-6 h-6 hover:text-pink-600"></i></a>
        <a href="#"><i data-lucide="linkedin" class="w-6 h-6 hover:text-blue-700"></i></a>
        <a href="#"><i data-lucide="x" class="w-6 h-6 hover:text-black"></i></a>
        <a href="#"><i data-lucide="youtube" class="w-6 h-6 hover:text-red-600"></i></a>
        <a href="#"><i data-lucide="whatsapp" class="w-6 h-6 hover:text-green-600"></i></a>
        <a href="#"><i data-lucide="github" class="w-6 h-6 hover:text-gray-800"></i></a>
      </div>
      <p class="mt-2 text-xs text-gray-500">© Tadokk 2025</p>
    </div>
  </div>

  <!-- Script -->
  <script>
    const SCORES_URL = "https://api.allorigins.win/raw?url=" + encodeURIComponent("https://docs.google.com/spreadsheets/d/e/2PACX-1vSSLEeAAtj-UvuFem6g0n-oKn7Y1Kr5O1e3OvYUwOjwOdF5Xh70Qz5N1xvrxuSYNk6GnJdd5W1xK6Dx/pub?output=csv");
    const REFRESH_INTERVAL_MS = 30000;

    const scoresContainer = document.getElementById('scores-container');
    const loadingIndicator = document.getElementById('loading');
    const lastUpdated = document.getElementById('last-updated');
    const errorMessage = document.getElementById('error-message');
    const upcomingContainer = document.getElementById('upcoming-container');

    function parseCSV(text) {
      const lines = text.trim().split('\n');
      const headers = lines[0].split(',').map(h => h.trim());
      return lines.slice(1).map(line => {
        const values = line.split(',').map(v => v.trim());
        let row = {};
        headers.forEach((h,i) => row[h] = values[i]);
        return row;
      });
    }

    function renderScores(data) {
      scoresContainer.innerHTML = '';
      const live = data.filter(m => m.Status && m.Status.toLowerCase() !== "upcoming");
      if (!live.length) {
        scoresContainer.innerHTML = '<p class="text-center text-gray-500">No live scores.</p>';
        return;
      }
      live.forEach(s => {
        scoresContainer.innerHTML += `
          <div class="p-4 rounded-xl shadow-md bg-white hover:scale-[1.02] transition">
            <div class="flex justify-between mb-4"><span class="font-bold">${s.TeamA}</span><span class="text-blue-600 font-extrabold">${s.ScoreA||''}</span></div>
            <div class="flex justify-between mb-4"><span class="font-bold">${s.TeamB}</span><span class="text-blue-600 font-extrabold">${s.ScoreB||''}</span></div>
            <p class="text-center text-xs text-gray-500">${s.Status||''}</p>
          </div>`;
      });
    }

    function renderUpcoming(data) {
      upcomingContainer.innerHTML = '';
      const upcoming = data.filter(m => m.Status && m.Status.toLowerCase() === "upcoming");
      if (!upcoming.length) {
        upcomingContainer.innerHTML = '<p class="text-gray-500">No upcoming matches listed.</p>';
        return;
      }
      upcoming.forEach(m => {
        const dateStr = m.NextMatch ? new Date(m.NextMatch).toLocaleDateString(undefined,{month:"long",day:"numeric",year:"numeric",weekday:"long"}) : "TBA";
        upcomingContainer.innerHTML += `
          <div class="p-4 rounded-lg bg-gray-50 shadow hover:scale-[1.02] transition">
            <p class="font-bold">${m.TeamA} vs ${m.TeamB}</p>
            <p class="text-sm text-gray-600">${dateStr}</p>
          </div>`;
      });
    }

    async function fetchScores() {
      loadingIndicator.classList.remove('hidden');
      try {
        const res = await fetch(SCORES_URL);
        const text = await res.text();
        const data = parseCSV(text);
        renderScores(data);
        renderUpcoming(data);
        lastUpdated.textContent = new Date().toLocaleString(undefined,{month:"long",day:"numeric",year:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit"});
      } catch {
        errorMessage.classList.remove('hidden');
      } finally {
        loadingIndicator.classList.add('hidden');
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      fetchScores();
      setInterval(fetchScores, REFRESH_INTERVAL_MS);
      setTimeout(() => {
        document.getElementById("intro-screen").style.display = "none";
        document.getElementById("page-content").classList.remove("opacity-0");
      }, 3500);
    });

    // Sidebar
    const sidebar = document.getElementById("sidebar"), overlay = document.getElementById("overlay");
    document.getElementById("open-nav").onclick = () => { sidebar.classList.add("active"); overlay.classList.remove("hidden"); };
    document.getElementById("close-nav").onclick = () => { sidebar.classList.remove("active"); overlay.classList.add("hidden"); };
    overlay.onclick = () => { sidebar.classList.remove("active"); overlay.classList.add("hidden"); };

    // Theme toggle
    const themeToggle = document.getElementById("theme-toggle");
    themeToggle.onclick = () => {
      document.documentElement.classList.toggle("dark");
      const icon = themeToggle.querySelector("i");
      icon.setAttribute("data-lucide", document.documentElement.classList.contains("dark") ? "sun" : "moon");
      lucide.createIcons();
    };

    lucide.createIcons();
  </script>
</body>
</html>